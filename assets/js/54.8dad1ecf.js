(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{490:function(s,a,t){"use strict";t.r(a);var r=t(37),n=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sonar简单使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonar简单使用"}},[s._v("#")]),s._v(" Sonar简单使用")]),s._v(" "),t("h2",{attrs:{id:"linux安装java-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux安装java-jdk"}},[s._v("#")]),s._v(" Linux安装java jdk")]),s._v(" "),t("p",[s._v("这个在Jenkins里面已经安装过了。")]),s._v(" "),t("h2",{attrs:{id:"linux-安装-sonarqube"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装-sonarqube"}},[s._v("#")]),s._v(" Linux 安装 sonarqube")]),s._v(" "),t("p",[s._v("去"),t("a",{attrs:{href:"https://www.sonarqube.org/downloads/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1),s._v("下载安装包。")]),s._v(" "),t("p",[s._v("在linux服务器上新建一个opt目录，然后把下载好的sonarqube安装包放进去，执行:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("unzip sonarqube"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zip\n")])])]),t("ul",[t("li",[s._v("bin目录存放的事各个环境的启动脚本")]),s._v(" "),t("li",[s._v("conf目录存放sonarqube的配置文件")]),s._v(" "),t("li",[s._v("logs目录存放着启动和运行时的日志文件")])]),s._v(" "),t("p",[s._v("我们进入bin目录下环境启动脚本，根据自己linux环境来:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("cd liunx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("86")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])])]),t("p",[s._v("该目录下"),t("code",[s._v("sonar.sh")]),s._v("是可执行文件")]),s._v(" "),t("p",[s._v("在启动前先使用chown命令将sonarqube及其子目录授权给一个非root的用户，sonarqube及其es等软件禁止root账户启动，因此需要切换一个非root账户，授权的用户需要有bin目录及其子目录的读取和可执行的权限")]),s._v(" "),t("h3",{attrs:{id:"添加用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加用户"}},[s._v("#")]),s._v(" 添加用户")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("useradd sonar\n")])])]),t("h3",{attrs:{id:"设置密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置密码"}},[s._v("#")]),s._v(" 设置密码")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("passwd sonar\n")])])]),t("h3",{attrs:{id:"把文件夹的授权给某一个用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#把文件夹的授权给某一个用户"}},[s._v("#")]),s._v(" 把文件夹的授权给某一个用户")]),s._v(" "),t("p",[s._v("先在cd到服务器根目录")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("chown "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("R")]),s._v(" sonar"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("sonar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sonarqube"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.4")]),s._v("\n")])])]),t("h3",{attrs:{id:"切换用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#切换用户"}},[s._v("#")]),s._v(" 切换用户")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("su sonar\n")])])]),t("h3",{attrs:{id:"启动sonar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动sonar"}},[s._v("#")]),s._v(" 启动sonar")]),s._v(" "),t("p",[s._v("cd到sonar.sh目录")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n")])])]),t("h3",{attrs:{id:"查看sonar-是否启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看sonar-是否启动"}},[s._v("#")]),s._v(" 查看sonar 是否启动")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("ss "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ntpl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" grep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:"/modular/1609927936959.jpg",alt:""}})]),s._v(" "),t("blockquote",[t("p",[s._v("注意:这里有坑")])]),s._v(" "),t("p",[s._v("如果"),t("code",[s._v("ss -ntpl | grep 9000")]),s._v("没有显示就要去logs目录下查看"),t("code",[s._v("sonar.log")]),s._v("文件，看它到底报什么错误。")]),s._v(" "),t("p",[s._v("我最开始sonar安装的是8.4的版本，然后由于安装jenkins的时候默认安装的java jdk是1.8版本，所以这个地方报错版本过低，必须要jdk11及其以上才行，后来下了一个jdk11包丢在opt目录下解压后，给了sonar访问jdk11权限后，修改sonarqube下面conf文件里面的wrapper.conf，把"),t("code",[s._v("wrapper.java.command=java")]),s._v("默认目录改成了"),t("code",[s._v("wrapper.java.command=/opt/jdk-11/bin/java")]),s._v("后到"),t("code",[s._v("bin/linux-x86-64")]),s._v("下执行"),t("code",[s._v("./sonar.sh start")]),s._v("提示我启动失败，查看日志:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Wrapper Started "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Daemon\nLaunching a "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JVM")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\nUnable to start "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JVM")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Permission "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("denied")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JVM")]),s._v(" exited "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" loading the application"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JVM")]),s._v(" Restarts disabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  Shutting down"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Wrapper Stopped\n")])])]),t("p",[s._v("然后又捣鼓了很久，换了sonarqube版本，java jdk 15版本等等发现了新问题:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.01")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".06")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INFO")]),s._v("  app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AppFileSystem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Cleaning or creating temp directory "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sonarqube"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.6")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("temp\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.01")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".06")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INFO")]),s._v("  app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("es"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("EsSettings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Elasticsearch listening on "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9001")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.01")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".06")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INFO")]),s._v("  app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ProcessLauncherImpl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Launch process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'es'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ipcIndex"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" logFilenamePrefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("es"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sonarqube"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.6")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("elasticsearch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sonarqube"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.6")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("elasticsearch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.01")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".06")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INFO")]),s._v("  app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SchedulerImpl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Waiting "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Elasticsearch to be up and running\nUnrecognized "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VM")]),s._v(" option "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'UseConcMarkSweepGC'")]),s._v("\nError"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Could not create the Java Virtual Machine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])])]),t("p",[s._v("这个是权限问题，给了权限也是不行，后来找来后台大佬来帮我搞权限问题才解决。")]),s._v(" "),t("h2",{attrs:{id:"访问服务器ip-9000端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问服务器ip-9000端口"}},[s._v("#")]),s._v(" 访问服务器ip+9000端口")]),s._v(" "),t("p",[s._v("点击登录进入，默认账户，密码都是 "),t("strong",[s._v("admin")])]),s._v(" "),t("p",[s._v("安装中文插件 "),t("strong",[s._v("chinese")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/modular/sonar_chinese.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"sonarqube-账号-token-的生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonarqube-账号-token-的生成"}},[s._v("#")]),s._v(" sonarqube 账号 token 的生成")]),s._v(" "),t("p",[s._v("sonarqube支持生成用户token，以便在命令行或者脚本中使用token代表账号操作sonarqubue，避免造成账号密码的泄露。 点击sonarqube首页右上角头像，进入我的账号")]),s._v(" "),t("p",[t("img",{attrs:{src:"/modular/sonar_token.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"检测前端代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检测前端代码"}},[s._v("#")]),s._v(" 检测前端代码")]),s._v(" "),t("ul",[t("li",[s._v("创建一个项目如test_01")]),s._v(" "),t("li",[s._v("生成token，生成token时会要求输入一个密钥，如果不输入的话直接使用项目名，安全起见，输入一个随机字符串")]),s._v(" "),t("li",[s._v("选择语言，进行构建即可。然后需要额外下载sonar-scanner。")])]),s._v(" "),t("h3",{attrs:{id:"sonar-scanner配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonar-scanner配置"}},[s._v("#")]),s._v(" sonar-scanner配置")]),s._v(" "),t("p",[s._v("下载sonar-scanner到本地并配置环境变量")]),s._v(" "),t("p",[s._v("MACOS下:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bash_profile\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" sonar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sonar-scanner目录'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nsource "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bash_profile\n")])])]),t("p",[s._v("查看sonar-scanner版本")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("sonar"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("scanner "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n")])])]),t("h2",{attrs:{id:"测试代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试代码"}},[s._v("#")]),s._v(" 测试代码")]),s._v(" "),t("p",[s._v("如果我们要检查项目的代码，那么在项目根目录下 新建 sonar-project.properties,填入一下信息，该信息在配置token的时候都会给你直接复制过来:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n#"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Default source code encoding\n sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sourceEncoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UTF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("projectKey"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test_01\n sonar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n")])])]),t("p",[s._v("在项目终端执行")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("sonar"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("scanner\n")])])]),t("p",[t("img",{attrs:{src:"/modular/sonar-scanner.png",alt:""}})]),s._v(" "),t("p",[s._v("然后就是等待中。。。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/modular/sonar-wait.png",alt:""}})]),s._v(" "),t("p",[s._v("最后我们查看网站的代码检查报表")]),s._v(" "),t("p",[t("img",{attrs:{src:"/modular/sonar-scanner.png",alt:""}})])])}),[],!1,null,null,null);a.default=n.exports}}]);