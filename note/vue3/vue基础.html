<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue基础 | 码农机器人</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="努力向前">
    <link rel="preload" href="/assets/css/0.styles.36f06804.css" as="style"><link rel="preload" href="/assets/js/app.ff252b3a.js" as="script"><link rel="preload" href="/assets/js/2.8fa949b0.js" as="script"><link rel="preload" href="/assets/js/85.925b0290.js" as="script"><link rel="prefetch" href="/assets/js/10.cb736b23.js"><link rel="prefetch" href="/assets/js/100.23a201c5.js"><link rel="prefetch" href="/assets/js/101.4f1a3ec8.js"><link rel="prefetch" href="/assets/js/102.027d8bd6.js"><link rel="prefetch" href="/assets/js/103.bcf65284.js"><link rel="prefetch" href="/assets/js/104.568503e2.js"><link rel="prefetch" href="/assets/js/105.38ad24c1.js"><link rel="prefetch" href="/assets/js/11.072d810f.js"><link rel="prefetch" href="/assets/js/12.9c404401.js"><link rel="prefetch" href="/assets/js/13.ccf4c04b.js"><link rel="prefetch" href="/assets/js/14.0be008bc.js"><link rel="prefetch" href="/assets/js/15.362b19b4.js"><link rel="prefetch" href="/assets/js/16.97504e73.js"><link rel="prefetch" href="/assets/js/17.e39c3a51.js"><link rel="prefetch" href="/assets/js/18.162e03d1.js"><link rel="prefetch" href="/assets/js/19.3e0b8b05.js"><link rel="prefetch" href="/assets/js/20.1374fd4d.js"><link rel="prefetch" href="/assets/js/21.30b35824.js"><link rel="prefetch" href="/assets/js/22.d6bda881.js"><link rel="prefetch" href="/assets/js/23.5fff4079.js"><link rel="prefetch" href="/assets/js/24.9d666797.js"><link rel="prefetch" href="/assets/js/25.d8663aec.js"><link rel="prefetch" href="/assets/js/26.638591ac.js"><link rel="prefetch" href="/assets/js/27.522fbfac.js"><link rel="prefetch" href="/assets/js/28.9b5dccf2.js"><link rel="prefetch" href="/assets/js/29.c6511ca2.js"><link rel="prefetch" href="/assets/js/3.6421eb0c.js"><link rel="prefetch" href="/assets/js/30.15bab7f6.js"><link rel="prefetch" href="/assets/js/31.6f288392.js"><link rel="prefetch" href="/assets/js/32.b14c9537.js"><link rel="prefetch" href="/assets/js/33.4f71bac1.js"><link rel="prefetch" href="/assets/js/34.58ac12e2.js"><link rel="prefetch" href="/assets/js/35.2dcfd4cc.js"><link rel="prefetch" href="/assets/js/36.802016a5.js"><link rel="prefetch" href="/assets/js/37.3616686d.js"><link rel="prefetch" href="/assets/js/38.6be03228.js"><link rel="prefetch" href="/assets/js/39.fa43c5e4.js"><link rel="prefetch" href="/assets/js/4.6f69a0ec.js"><link rel="prefetch" href="/assets/js/40.ccb08257.js"><link rel="prefetch" href="/assets/js/41.170e58d5.js"><link rel="prefetch" href="/assets/js/42.c55d7e12.js"><link rel="prefetch" href="/assets/js/43.aa53fa78.js"><link rel="prefetch" href="/assets/js/44.ad0c44ba.js"><link rel="prefetch" href="/assets/js/45.c23a1cec.js"><link rel="prefetch" href="/assets/js/46.c7964a9f.js"><link rel="prefetch" href="/assets/js/47.6b527201.js"><link rel="prefetch" href="/assets/js/48.084a716f.js"><link rel="prefetch" href="/assets/js/49.a2a13465.js"><link rel="prefetch" href="/assets/js/5.29fae726.js"><link rel="prefetch" href="/assets/js/50.f0e74700.js"><link rel="prefetch" href="/assets/js/51.a4bcd1c6.js"><link rel="prefetch" href="/assets/js/52.ae8824f8.js"><link rel="prefetch" href="/assets/js/53.8c4236e2.js"><link rel="prefetch" href="/assets/js/54.10af7bbf.js"><link rel="prefetch" href="/assets/js/55.75138380.js"><link rel="prefetch" href="/assets/js/56.0e73a009.js"><link rel="prefetch" href="/assets/js/57.7a4297bd.js"><link rel="prefetch" href="/assets/js/58.f578e8f2.js"><link rel="prefetch" href="/assets/js/59.b3d447a2.js"><link rel="prefetch" href="/assets/js/6.73d76557.js"><link rel="prefetch" href="/assets/js/60.ca2ac055.js"><link rel="prefetch" href="/assets/js/61.60f2c51d.js"><link rel="prefetch" href="/assets/js/62.258c118b.js"><link rel="prefetch" href="/assets/js/63.cf177d9a.js"><link rel="prefetch" href="/assets/js/64.d4557f40.js"><link rel="prefetch" href="/assets/js/65.47748ed8.js"><link rel="prefetch" href="/assets/js/66.2f6e1280.js"><link rel="prefetch" href="/assets/js/67.c87827d3.js"><link rel="prefetch" href="/assets/js/68.5e53bc5f.js"><link rel="prefetch" href="/assets/js/69.215a1532.js"><link rel="prefetch" href="/assets/js/7.20ebb3ce.js"><link rel="prefetch" href="/assets/js/70.cec5f1b6.js"><link rel="prefetch" href="/assets/js/71.226d2aa6.js"><link rel="prefetch" href="/assets/js/72.b7642cd8.js"><link rel="prefetch" href="/assets/js/73.c888b8eb.js"><link rel="prefetch" href="/assets/js/74.f63cf2d8.js"><link rel="prefetch" href="/assets/js/75.558b3660.js"><link rel="prefetch" href="/assets/js/76.fd30517d.js"><link rel="prefetch" href="/assets/js/77.aac825ac.js"><link rel="prefetch" href="/assets/js/78.60ba9e2f.js"><link rel="prefetch" href="/assets/js/79.f4892b4d.js"><link rel="prefetch" href="/assets/js/8.3e18062c.js"><link rel="prefetch" href="/assets/js/80.03f97401.js"><link rel="prefetch" href="/assets/js/81.dec537b9.js"><link rel="prefetch" href="/assets/js/82.fe0c7c9b.js"><link rel="prefetch" href="/assets/js/83.a2f8e639.js"><link rel="prefetch" href="/assets/js/84.b7d8d020.js"><link rel="prefetch" href="/assets/js/86.51d804ec.js"><link rel="prefetch" href="/assets/js/87.c1b9962a.js"><link rel="prefetch" href="/assets/js/88.ae404626.js"><link rel="prefetch" href="/assets/js/89.689c2e87.js"><link rel="prefetch" href="/assets/js/9.24e501af.js"><link rel="prefetch" href="/assets/js/90.cc625757.js"><link rel="prefetch" href="/assets/js/91.972e30da.js"><link rel="prefetch" href="/assets/js/92.a1c5d858.js"><link rel="prefetch" href="/assets/js/93.ee8ffc65.js"><link rel="prefetch" href="/assets/js/94.0cb0ac84.js"><link rel="prefetch" href="/assets/js/95.a0c50c19.js"><link rel="prefetch" href="/assets/js/96.6da45ef7.js"><link rel="prefetch" href="/assets/js/97.ede29e66.js"><link rel="prefetch" href="/assets/js/98.04d90134.js"><link rel="prefetch" href="/assets/js/99.cfbf9725.js">
    <link rel="stylesheet" href="/assets/css/0.styles.36f06804.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="码农机器人" class="logo"> <span class="site-name can-hide">码农机器人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  react
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>建立前端知识体系</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue源码分析</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/vue3/vue基础.html" class="active sidebar-link">Vue基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#v-show和v-if的区别" class="sidebar-link">v-show和v-if的区别</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#v-if-和-v-for-为什么不能一起使用" class="sidebar-link">v-if 和 v-for 为什么不能一起使用</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-父子组件如何通讯" class="sidebar-link">vue 父子组件如何通讯</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#如何自定义事件进行-vue-组件通讯" class="sidebar-link">如何自定义事件进行 vue 组件通讯</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-如何如何实现-v-model" class="sidebar-link">vue 如何如何实现 v-model</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-组件跟新之后如何获取最新的-dom" class="sidebar-link">vue 组件跟新之后如何获取最新的 dom</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#slot" class="sidebar-link">slot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#一般插槽" class="sidebar-link">一般插槽</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#具名插槽" class="sidebar-link">具名插槽</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#作用域插槽" class="sidebar-link">作用域插槽</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#解构插槽" class="sidebar-link">解构插槽</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-动态组件" class="sidebar-link">vue 动态组件</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-异步加载组件" class="sidebar-link">vue 异步加载组件</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-缓存" class="sidebar-link">vue 缓存</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-组件抽离公共逻辑" class="sidebar-link">vue 组件抽离公共逻辑</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-注册全局方法" class="sidebar-link">Vue 注册全局方法</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-双向绑定原理" class="sidebar-link">Vue 双向绑定原理</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#什么是-mvvm" class="sidebar-link">什么是 MVVM</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#computed-和-watch-的区别" class="sidebar-link">computed 和 watch 的区别</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-data-为什么必须是函数" class="sidebar-link">Vue data 为什么必须是函数</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#子组件可以直接改变父组件的数据吗？为什么" class="sidebar-link">子组件可以直接改变父组件的数据吗？为什么</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-的父组件和子组件生命周期钩子函数执行顺序？" class="sidebar-link">Vue 的父组件和子组件生命周期钩子函数执行顺序？</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue-中-key-的作用？为什么不能使用索引作为-key" class="sidebar-link">vue 中 key 的作用？为什么不能使用索引作为 key</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#模版编译" class="sidebar-link">模版编译</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue组件是如何渲染和更新的" class="sidebar-link">Vue组件是如何渲染和更新的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#初次渲染过程" class="sidebar-link">初次渲染过程</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#更新过程" class="sidebar-link">更新过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#路由hash的特点" class="sidebar-link">路由hash的特点</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#路由history特点" class="sidebar-link">路由history特点</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue常见的性能优化" class="sidebar-link">Vue常见的性能优化</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue3比vue2有什么优势" class="sidebar-link">Vue3比Vue2有什么优势</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#composition-api带了什么" class="sidebar-link">Composition API带了什么</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#ref为何需要-value" class="sidebar-link">ref为何需要.value</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#为何需要toref和torefs" class="sidebar-link">为何需要toRef和toRefs</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue3升级了哪些重要功能" class="sidebar-link">Vue3升级了哪些重要功能</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#watch和watcheffect的区别" class="sidebar-link">watch和watchEffect的区别</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#vue3为何比vue2快" class="sidebar-link">Vue3为何比Vue2快</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#patchflag" class="sidebar-link">PatchFlag</a></li><li class="sidebar-sub-header"><a href="/note/vue3/vue基础.html#hoiststatic" class="sidebar-link">hoistStatic</a></li></ul></li></ul></li><li><a href="/note/vue3/初始化.html" class="sidebar-link">初始化</a></li><li><a href="/note/vue3/mount.html" class="sidebar-link">$mount解读</a></li><li><a href="/note/vue3/双向绑定.html" class="sidebar-link">双向绑定</a></li><li><a href="/note/vue3/编译器.html" class="sidebar-link">编译器</a></li><li><a href="/note/vue3/数据驱动.html" class="sidebar-link">数据驱动</a></li><li><a href="/note/vue3/nextTick.html" class="sidebar-link">nextTick</a></li><li><a href="/note/vue3/vuex.html" class="sidebar-link">Vuex</a></li><li><a href="/note/vue3/vue3.html" class="sidebar-link">vue3</a></li><li><a href="/note/vue3/生态系统.html" class="sidebar-link">生态系统</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>提效赋能 前端工程化篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>全栈赋能 Node篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>程序员PLUS篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>习题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>忍者秘籍书</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue基础"><a href="#vue基础" class="header-anchor">#</a> Vue基础</h1> <h2 id="v-show和v-if的区别"><a href="#v-show和v-if的区别" class="header-anchor">#</a> v-show和v-if的区别</h2> <ul><li>v-show通过CSS display控制显示和隐藏</li> <li>v-if组件真正的渲染和销毁，而不是显示和隐藏</li> <li>频繁切换显示状态的时候用v-show，否则用v-if</li></ul> <h2 id="v-if-和-v-for-为什么不能一起使用"><a href="#v-if-和-v-for-为什么不能一起使用" class="header-anchor">#</a> v-if 和 v-for 为什么不能一起使用</h2> <p>关于这个问题我们可以先看看模版编译后的 render 函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vue-template-compiler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// v-if</span>
<span class="token keyword">const</span> v_if <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p v-if=&quot;show&quot;&gt;{{ item }}&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str1 <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>v_if<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>
<span class="token comment">// with(this){return (show)?_c('p',[_v(_s(item))]):_e()}</span>

<span class="token comment">// v-for</span>
<span class="token keyword">const</span> v_for <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;ul&gt;
        &lt;li v-for=&quot;item in list&quot;&gt;{{ item.value }}&lt;/li&gt;
    &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str2 <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>v_for<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// with(this){return _c('ul',_l((list),function(item){return _c('li',[_v(_s(item.value))])}),0)}</span>

<span class="token comment">// v-for + v-if</span>

<span class="token keyword">const</span> v_for_if <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;ul&gt;
        &lt;li v-for=&quot;item in list&quot; v-if=&quot;item.show&quot;&gt;{{ item.value }}&lt;/li&gt;
    &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str3 <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>v_for_if<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 正确的写法1</span>
<span class="token keyword">const</span> template<span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;ul&gt;
        &lt;li v-for=&quot;item in list&quot; &gt;
            &lt;div v-if=&quot;item.show&quot;&gt;{ item.value }}&lt;/div&gt; {
        &lt;/li&gt;
    &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 正确写法二使用computed</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>show<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// with(this){return _c('ul',_l((list),function(item){return (item.show)?_c('li',[_v(_s(item.value))]):_e()}),0)}</span>
</code></pre></div><p>过程分析：我们可以发现<font color="red">v-for</font>其实就是执行了<code>_l((list),function(item){return (item.show)?_c('li',[_v(_s(item.value))]):_e()}),0)</code>，而<font color="red">v-if</font>其实在<code>_l</code>函数内部又执行了一次 if 判断，这样就好造成性能的损耗，所以一般不建议这样写。</p> <p>结论：<strong>v-for 的优先级高于 v-if</strong></p> <ul><li><p>永远不要把 v-if 和 v-for 同时用在同一个元素上，带来性能方面的浪费（每次渲染都会先循环再进行条件判断）</p></li> <li><p>如果避免出现这种情况，则在外层嵌套template（页面渲染不生成dom节点），在这一层进行v-if判断，然后在内部进行v-for循环</p></li> <li><p>如果条件出现在循环内部，可通过计算属性computed提前过滤掉那些不需要显示的项</p></li></ul> <h2 id="vue-父子组件如何通讯"><a href="#vue-父子组件如何通讯" class="header-anchor">#</a> vue 父子组件如何通讯</h2> <ol><li>使用<code>props</code>进行数据的传递，使用<code>$emit</code>对事件进行发布订阅</li></ol> <p>Parent 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>我是父组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">@child-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>childClick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:mssage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Parent&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">&quot;父组件传递&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">childClick</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>child 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child-component<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>childClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    子组件 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    父组件传递的参数：{{ message }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Child&quot;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">childClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;child-click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>使用 ref 调用组件方法
当然还有其他的方式这里不一一列举了，这里主要是项目中常用的</li></ol> <h2 id="如何自定义事件进行-vue-组件通讯"><a href="#如何自定义事件进行-vue-组件通讯" class="header-anchor">#</a> 如何自定义事件进行 vue 组件通讯</h2> <p><strong>使用<code>events</code></strong></p> <ol><li>创建<code>events.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Events<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>在<code>main.js</code>进行引入并使用 use 方法载入 Vue 实例中</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Events <span class="token keyword">from</span> <span class="token string">&quot;./events&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Events<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 为了方便使用直接挂载在Vue的实例上</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$events <span class="token operator">=</span> Events<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>使用上述 demo 进行测试
Parent 组件</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testBus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是父组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">:mssage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Parent&quot;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">&quot;父组件传递&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">testBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$events<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解除订阅事件</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>child 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child-component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    子组件 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    父组件传递的参数：{{ message }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Child&quot;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$events<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 1}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-如何如何实现-v-model"><a href="#vue-如何如何实现-v-model" class="header-anchor">#</a> vue 如何如何实现 v-model</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>change<span class="token punctuation">'</span>, $event.target.value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    model<span class="token operator">:</span> <span class="token punctuation">{</span>
      prop<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token comment">// 与下边的props保持一致</span>
      event<span class="token operator">:</span> <span class="token string">'change'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
      text<span class="token operator">:</span> String
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model" target="_blank" rel="noopener noreferrer">参考 vue 官方文档链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="vue-组件跟新之后如何获取最新的-dom"><a href="#vue-组件跟新之后如何获取最新的-dom" class="header-anchor">#</a> vue 组件跟新之后如何获取最新的 dom</h2> <p>可以使用 this.$nextTick，官方文档是这么说的：<strong>将回调延迟到下次 DOM 更新循环之后执行。</strong>，通俗的说也就是 dom 更新完成之后执行，
可以理解成 vue 在进行页面渲染的时候其实是进行了一个批处理的，因为 data 会有多次更新，当数据更新完成（相当于是批处理了），我们再去渲染页面，这样可以节省浏览器渲染 dom 的开销，从而提升性能。</p> <div class="language-vue extra-class"><pre class="language-vue"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// DOM现在更新了</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="slot"><a href="#slot" class="header-anchor">#</a> slot</h2> <p><a href="https://cn.vuejs.org/v2/guide/components-slots.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD" target="_blank" rel="noopener noreferrer">官方文档地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="一般插槽"><a href="#一般插槽" class="header-anchor">#</a> 一般插槽</h3> <p>Child 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>
      默认插槽
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Parent 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>填充内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h3> <p>Child 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      默认插槽
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Parent 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 使用方式一 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>填充内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 使用方式二 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>填充内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h3> <p>Child 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ user.lastName }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      user<span class="token operator">:</span> <span class="token punctuation">{</span>
        lastName<span class="token operator">:</span> <span class="token string">&quot;sss&quot;</span><span class="token punctuation">,</span>
        firstName<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Parent 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ slotProps.user.firstName }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>v-slot:default=&quot;slotProps&quot;</code>需要注意以下点：</p> <ul><li>如果<code>&lt;slot v-bind:user=&quot;user&quot;&gt;</code>没有<code>name</code>直接使用<code>v-slot:default</code>，否则使用 v-slot:[name]，即<code>&lt;slot name=&quot;content&quot; v-bind:user=&quot;user&quot;&gt;</code>，<code>&lt;template v-slot:content=&quot;slotProps&quot;&gt;</code></li> <li>slotProps 可任意定义</li></ul> <h3 id="解构插槽"><a href="#解构插槽" class="header-anchor">#</a> 解构插槽</h3> <p>Parent 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ user }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{ user.firstName }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Child</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-动态组件"><a href="#vue-动态组件" class="header-anchor">#</a> vue 动态组件</h2> <p>有的时候，在不同组件之间进行动态切换是非常有用的，比如在一个多标签的界面里，尽行 tab 切换，这个时候<code>component</code>组件就很有用了。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>HelloWorld<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ message: <span class="token punctuation">'</span>ssss<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>知识点：</p> <ol><li>使用<code>is</code>进行组件的绑定，is 后面可以是<strong>已注册组件的名字</strong>，或者<strong>一个组件的选项对象</strong></li> <li>使用<code>v-bind</code>传递 props</li></ol> <h2 id="vue-异步加载组件"><a href="#vue-异步加载组件" class="header-anchor">#</a> vue 异步加载组件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">HelloWorld</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../components/HelloWorld.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>使用<code>import()</code>方式进行异步加载组件，与路由懒加载一致</p> <h2 id="vue-缓存"><a href="#vue-缓存" class="header-anchor">#</a> vue 缓存</h2> <p>使用<code>keep-alive</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Component1</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p === 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Component1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Component2</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p === 2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Component2</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Component3</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Component3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-组件抽离公共逻辑"><a href="#vue-组件抽离公共逻辑" class="header-anchor">#</a> vue 组件抽离公共逻辑</h2> <p>使用 mixins</p> <p>优点：</p> <ul><li>抽离公共方法，避免重复业务逻辑</li></ul> <p>缺点：</p> <ul><li>随着 <code>mixins</code> 的增加，会给阅读代码增加一些困难，会造成命名污染</li></ul> <h2 id="vue-注册全局方法"><a href="#vue-注册全局方法" class="header-anchor">#</a> Vue 注册全局方法</h2> <ol><li>挂载在 Vue.prototype 上面</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>globalXX <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>使用 <code>mixins</code> 采用全局混入的方式</li></ol> <ul><li>创建一个 <code>mixins</code> 文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> globalMixins <span class="token operator">=</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> globalMixins<span class="token punctuation">;</span>
</code></pre></div><ul><li>在 main.js 中进行全局注册</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> globalMixins <span class="token keyword">from</span> <span class="token string">&quot;./mixins/globalMixins&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">mixins</span><span class="token punctuation">(</span>globalMixins<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>使用 Plugin 方式</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$getData <span class="token operator">=</span> getData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> plugin<span class="token punctuation">;</span>
</code></pre></div><ul><li>在 main.js 中进行全局注册</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> plugin <span class="token keyword">from</span> <span class="token string">&quot;./plugin/plugin&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="vue-双向绑定原理"><a href="#vue-双向绑定原理" class="header-anchor">#</a> Vue 双向绑定原理</h2> <ol><li><p>原理</p> <p>View 的变化能实时让 Model 发生变化，而 Model 的变化也能更新到 View。如下图：
<img src="/vue3/viewmodel.jpg" alt="vue双向绑定原理"></p></li></ol> <p>Vue 采用<strong>数据劫持&amp;发布定于模式的方式</strong>，通过<strong>Object.defineProperty()</strong>，方法来劫持（监控）各属性的 getter，setter，并在数据发生变化时通知订阅者，触发相应的监听回调。</p> <p>缺点：想要重新定义属性的 getter/setter 就必须先知道有哪些属性，所以新加属性就没法响应了。为了解决这个问题 vue 不得已引入了 Vue.set</p> <p>要实现 Vue 的双向绑定大致可以划分是三个模块，如图：
<img src="/vue3/a049d147.jpg" alt="vue双向绑定原理"></p> <ul><li><p>Observer</p> <p><strong>数据监听器</strong>，负责对数据对象的所有数据进行监听（数据劫持），监听到数据变化通知订阅者。</p></li> <li><p>Complier</p> <p><strong>指令解析器</strong>，扫描模版，并对指令进行解析，然后绑定指定事件。</p></li> <li><p>Watcher</p> <p><strong>Watcher 订阅者</strong>，关联<strong>Observer</strong>，和<strong>Complier</strong>，能够订阅并收到属性变动的通知，执行指令绑定的相应操作，更新视图。Update()是他自身的一个方法，用于执行 Compiler 中绑定的回调，更新视图。</p></li></ul> <p>模版渲染解析时 Watcher 会对应绑定指令（一对一）。
此时会通过调用订阅者 watcher 初始化（watcher 中的 get 方法），去触发对应属性在发布者 observer 里（Object.defineProperty()）的 getter，Observer 会判断是不是通过 watcher 初始化调用（Dep.target 实例化之后会被清空），只有是才会通过 dep 类依赖收集。</p> <p>observer 通过 depend 通知 Dep 类收集（addDep 方法，在 watcher 类中，会传入当前 Dep 实例调用本身）当前该订阅者（watcher）中的触发更新的方法，同时第一次初始化 watcher.update()初始化视图。此后每次的数据更新都会通过 <code>observer</code> 中的 setter 去触发 dep 类中的回调 update 执行收集依赖的所有方法更新订阅者中的状态同时更新视图。</p> <p>observer 在处理对象和数组的时候，如果是数组，并且调用的方法会改变数组长度，则会重新增加索引之后更新数组，进行重新监听。如果是对象则通过对象的 getter 获取值 setter 更新值。</p> <h2 id="什么是-mvvm"><a href="#什么是-mvvm" class="header-anchor">#</a> 什么是 MVVM</h2> <ul><li>MVVM 是 Model-View-ViewModel 的缩写。MVVM 是一种设计思想。Model 层代表数据模型，也可以在 Model 中定义数据修改和操作的业务逻辑；View 代表 UI 组件，它负责将数据模型转化成 UI 展现出来，ViewModel 是一个同步 View 和 Model 的对象。</li> <li>在 MVVM 架构下，View 和 Model 之间并没有直接的联系，而是通过 ViewModel 进行交互，Model 和 ViewModel 之间的交互是双向的， 因此 View 数据的变化会同步到 Model 中，而 Model 数据的变化也会立即反应到 View 上。</li> <li>ViewModel 通过双向数据绑定把 View 层和 Model 层连接了起来，而View 和 Model 之间的同步工作完全是自动的，无需人为干涉，因此开发者只需关注业务逻辑，不需要手动操作DOM, 不需要关注数据状态的同步问题，复杂的数据状态维护完全由 MVVM 来统一管理。</li></ul> <h2 id="computed-和-watch-的区别"><a href="#computed-和-watch-的区别" class="header-anchor">#</a> computed 和 watch 的区别</h2> <p><strong>computed</strong></p> <p>computed 是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值</p> <p><strong>watch</strong></p> <p>更多的是「观察」的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作</p> <p>运用场景：</p> <ul><li>当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算</li> <li>当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作 ( 访问一个 API )，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的</li></ul> <h2 id="vue-data-为什么必须是函数"><a href="#vue-data-为什么必须是函数" class="header-anchor">#</a> Vue data 为什么必须是函数</h2> <p>因为组件是用来复用的，且 JS 的对象都是引用类型，如果组件中的 data 是一个对象，那么这样作用域没有隔离，子组件中的属性会相互影响，如果组件中的 data 返回的是一个函数那么每个实例，可以维护一份被返回对象的拷贝属性，组件实例之间的 data 属性不会相互影响，而<code>new Vue</code>的实例不会被复用，因此不存在引用对象的问题。</p> <h2 id="子组件可以直接改变父组件的数据吗？为什么"><a href="#子组件可以直接改变父组件的数据吗？为什么" class="header-anchor">#</a> 子组件可以直接改变父组件的数据吗？为什么</h2> <p>不可以，由于 vue 的单向数据流，当子组件改变父组件数据时，Vue 会在浏览器的控制台中发出警告，如果需要修改可以使用<code>$emit</code>发射事件，或者使用<code>.sync</code>修饰符。</p> <h2 id="vue-的父组件和子组件生命周期钩子函数执行顺序？"><a href="#vue-的父组件和子组件生命周期钩子函数执行顺序？" class="header-anchor">#</a> Vue 的父组件和子组件生命周期钩子函数执行顺序？</h2> <p>Vue 的父组件和子组件生命周期钩子函数执行顺序可以归类为以下 4 部分：</p> <ul><li><p>加载渲染过程
父 beforeCreate -&gt; 父 created -&gt; 父 beforeMount -&gt; 子 beforeCreate -&gt; 子 created -&gt; 子 beforeMount -&gt; 子 mounted -&gt; 父 mounted</p></li> <li><p>子组件更新过程
父 beforeUpdate -&gt; 子 beforeUpdate -&gt; 子 updated -&gt; 父 updated</p></li> <li><p>父组件更新过程
父 beforeUpdate -&gt; 父 updated</p></li></ul> <ul><li>销毁过程
父 beforeDestroy -&gt; 子 beforeDestroy -&gt; 子 destroyed -&gt; 父 destroyed</li></ul> <h2 id="vue-中-key-的作用？为什么不能使用索引作为-key"><a href="#vue-中-key-的作用？为什么不能使用索引作为-key" class="header-anchor">#</a> vue 中 key 的作用？为什么不能使用索引作为 key</h2> <p>key 是为 Vue 中 vnode 的唯一标记，通过这个 key，我们的 diff 操作可以更准确、更快速。</p> <ul><li><p>更准确：因为带 key 就不是就地复用了，在 sameNode 函数 a.key === b.key 对比中可以避免就地复用的情况。所以会更加准确。</p></li> <li><p>更快速：利用 key 的唯一性生成 map 对象来获取对应节点，比遍历方式更快，源码如下：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createKeyToOldIdx</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> beginIdx<span class="token punctuation">,</span> endIdx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i<span class="token punctuation">,</span> key<span class="token punctuation">;</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> beginIdx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> endIdx<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果使用了数组的索引，当数组的长度变化时，其索引也会跟着变化，导致标记的 key 会移动位置，此时再通过 sameNode 找到的组件就会出现偏差。</p> <h2 id="模版编译"><a href="#模版编译" class="header-anchor">#</a> 模版编译</h2> <ul><li>模板不是HTML，有指令、插值、JS表达式，能实现判断，循环</li> <li>HTML是标签语言，只有JS才能实现判断、循环</li> <li>因此，模板一定是转换为某种JS代码，即编译模板</li> <li>模板编译为render函数，执行render函数返回vnode</li> <li>基于vnode再执行path和diff</li> <li>使用webpack vue-loader,会在开发环境下编译模板</li></ul> <h2 id="vue组件是如何渲染和更新的"><a href="#vue组件是如何渲染和更新的" class="header-anchor">#</a> Vue组件是如何渲染和更新的</h2> <h3 id="初次渲染过程"><a href="#初次渲染过程" class="header-anchor">#</a> 初次渲染过程</h3> <ul><li>解析模板为render函数</li> <li>触发响应式，监听data属性getter setter</li> <li>执行render函数，生产vnode，patch(elem.vnode)</li></ul> <h3 id="更新过程"><a href="#更新过程" class="header-anchor">#</a> 更新过程</h3> <ul><li>修改data，触发setter(此前在getter中已被监听)</li> <li>重新执行render函数，生成vnode</li> <li>patch(vnode,newVnode)</li></ul> <p><img src="/vue3/a049d147.jpg" alt=""></p> <p>模板编译完成生成render函数,生成一个vnode，执行vnode的时候会触发data里面的getter，生成依赖，在模板里面触发了哪个getter就会通过Watcher把他观察起来；修改data的setter的时候通知Watcher，判断是否是之前被观察起来的，如果是之前被观察起来的就会重新触发re-render重新渲染，patch。</p> <h2 id="路由hash的特点"><a href="#路由hash的特点" class="header-anchor">#</a> 路由hash的特点</h2> <ul><li>hash变化触发网页跳转，即浏览器的前进，后退</li> <li>hash变化不会刷新页面，SPA必须的特点</li> <li>hash永远不会提交到server端(前端自生自灭)</li></ul> <h2 id="路由history特点"><a href="#路由history特点" class="header-anchor">#</a> 路由history特点</h2> <ul><li>用url规范的路由，但跳转时不刷新页面</li> <li>history.pushState</li> <li>window.onpopstate</li></ul> <h2 id="vue常见的性能优化"><a href="#vue常见的性能优化" class="header-anchor">#</a> Vue常见的性能优化</h2> <ul><li>合理使用v-if和v-show</li> <li>合理使用computed</li> <li>v-for时加key，以及避免和v-if同时使用</li> <li>自定义事件，dom事件及时销毁</li> <li>合理使用异步组件</li> <li>合理使用keep-alive</li> <li>data层级不要太深</li> <li>使用vue-loader在开发环境做模板编译</li> <li>webpack层面的优化</li> <li>前端通用的性能优化，如图片懒加载</li> <li>使用SSR</li></ul> <h2 id="vue3比vue2有什么优势"><a href="#vue3比vue2有什么优势" class="header-anchor">#</a> Vue3比Vue2有什么优势</h2> <ul><li>性能更好</li> <li>体积更小</li> <li>更好的ts支持</li> <li>更好的代码组织</li> <li>更好的逻辑抽离</li> <li>更多新功能</li></ul> <h2 id="composition-api带了什么"><a href="#composition-api带了什么" class="header-anchor">#</a> Composition API带了什么</h2> <ul><li>更好的代码组织</li> <li>更好的逻辑复用</li> <li>更好的类型推导</li></ul> <h2 id="ref为何需要-value"><a href="#ref为何需要-value" class="header-anchor">#</a> ref为何需要.value</h2> <ul><li>ref是一个响应式对象(不丢失响应式)，value存储值</li> <li>通过.value属性的get和set实现响应式</li> <li>用于模板，reactive时，不需要.value，其他情况都需要</li></ul> <h2 id="为何需要toref和torefs"><a href="#为何需要toref和torefs" class="header-anchor">#</a> 为何需要toRef和toRefs</h2> <ul><li>初衷:不丢失响应式的情况下，把对象数据 分解/扩散</li> <li>前提:针对的是响应式(reactive封装的)非普通对象</li> <li>注意:不创造响应式，而是延续响应式</li></ul> <h2 id="vue3升级了哪些重要功能"><a href="#vue3升级了哪些重要功能" class="header-anchor">#</a> Vue3升级了哪些重要功能</h2> <ul><li>createApp</li> <li>emits属性</li> <li>生命周期</li> <li>多事件</li> <li>Fragment</li> <li>移除.sync</li> <li>异步组件的写法</li> <li>移除filter</li> <li>Teleport</li> <li>Suspense</li> <li>Composition Api</li></ul> <h2 id="watch和watcheffect的区别"><a href="#watch和watcheffect的区别" class="header-anchor">#</a> watch和watchEffect的区别</h2> <ul><li>两者都可以监听data属性变化</li> <li>watch需要明确监听哪个属性</li> <li>watchEffect会根据其中的属性，自动监听其变化</li></ul> <h2 id="vue3为何比vue2快"><a href="#vue3为何比vue2快" class="header-anchor">#</a> Vue3为何比Vue2快</h2> <ul><li>Proxy响应式</li> <li>PatchFlag(静态标记)</li> <li>hoistStatic(静态提升)</li> <li>cacheHandle(缓存事件)</li> <li>SSR优化</li> <li>tree-shaking</li></ul> <h3 id="patchflag"><a href="#patchflag" class="header-anchor">#</a> PatchFlag</h3> <ul><li>编译模板时，动态节点做标记</li> <li>标记，分为不同的类型，如TEXT PROPS</li> <li>diff算法时，可以区分静态节点，以及不同类型的动态节点</li></ul> <h3 id="hoiststatic"><a href="#hoiststatic" class="header-anchor">#</a> hoistStatic</h3> <ul><li>将静态节点的定义，提升到父作用域，缓存起来</li> <li>多个相邻的静态节点，会被合并起来</li> <li>典型的拿空间换时间的优化策略</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/7/2021, 2:59:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/knowledge/元编程.html" class="prev">
        元编程
      </a></span> <span class="next"><a href="/note/vue3/初始化.html">
        初始化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.ff252b3a.js" defer></script><script src="/assets/js/2.8fa949b0.js" defer></script><script src="/assets/js/85.925b0290.js" defer></script>
  </body>
</html>
